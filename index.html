<html lang="de">
<head>
    <title>Mathefacts</title>

    <!-- data tables -->
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet" type="text/css">
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" type="text/javascript"></script>

    <!-- time calculation -->
    <script src="https://unpkg.com/dayjs@1.11.2/dayjs.min.js"></script>
    <script src="https://unpkg.com/dayjs@1.11.2/plugin/duration.js"></script>
    <script src="https://unpkg.com/dayjs@1.11.2/plugin/customParseFormat.js"></script>
</head>
<body>
<h1>Mathefacts</h1>
<table id="mathefacts" style="width:100%">
    <thead>
        <tr>
            <th>Folge</th>
            <th>Folgentitel</th>
            <th>Faktthema</th>
            <th>Fakt</th>
            <th>Startzeit</th>
            <th>Endzeit</th>
            <th>Dauer</th>
        </tr>
    </thead>
</table>
<script type="text/javascript">
    dayjs.extend(window.dayjs_plugin_duration);
    dayjs.extend(window.dayjs_plugin_customParseFormat);

    document.addEventListener("DOMContentLoaded", () => {
        let table = new simpleDatatables.DataTable(document.getElementById("mathefacts"));
        fetch("./data.json")
            .then(data => data.json())
            .then(data => {
                let insertData = data.data.map(({id, name, faktthema, beschreibung, startzeit, endzeit}) => {
                    let [start, end] = [startzeit, endzeit].map(el => dayjs(el, "hh:mm:ss"));
                    let diff = dayjs.duration(end.diff(start));
                    return [id, name, faktthema, beschreibung, startzeit, endzeit, diff.format("mm:ss")];
                });
                table.rows().add(insertData);
            });
    });
</script>
</body>
</html>

